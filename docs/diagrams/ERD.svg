<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #1a73e8; stroke-width: 2; rx: 10; ry: 10; }
      .title { font: bold 16px Arial; fill: #1a73e8; }
      .field { font: 12px Arial; fill: #2c3e50; }
      .note { font: italic 11px Arial; fill: #6c757d; }
      .rel { stroke: #34495e; stroke-width: 2; marker-end: url(#arrow); }
      .relText { font: 12px Arial; fill: #34495e; }
      .bg { fill: #f8fbff; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#34495e" />
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="700" />

  <!-- User -->
  <rect class="box" x="60" y="60" width="280" height="180" />
  <text class="title" x="80" y="86">User</text>
  <text class="field" x="80" y="112">_id: ObjectId</text>
  <text class="field" x="80" y="132">name: String</text>
  <text class="field" x="80" y="152">email: String (unique)</text>
  <text class="field" x="80" y="172">phone: String</text>
  <text class="field" x="80" y="192">passwordHash: String (bcrypt)</text>

  <!-- Admin -->
  <rect class="box" x="860" y="60" width="280" height="200" />
  <text class="title" x="880" y="86">Admin</text>
  <text class="field" x="880" y="112">_id: ObjectId</text>
  <text class="field" x="880" y="132">name: String</text>
  <text class="field" x="880" y="152">username: String (unique)</text>
  <text class="field" x="880" y="172">email: String (unique)</text>
  <text class="field" x="880" y="192">passwordHash: String (bcrypt)</text>
  <text class="field" x="880" y="212">role: enum('admin','super_admin')</text>
  <text class="field" x="880" y="232">permissions: String[]</text>

  <!-- Flight -->
  <rect class="box" x="60" y="300" width="300" height="220" />
  <text class="title" x="80" y="326">Flight</text>
  <text class="field" x="80" y="352">_id: ObjectId</text>
  <text class="field" x="80" y="372">flightNumber: String (unique)</text>
  <text class="field" x="80" y="392">airline: String</text>
  <text class="field" x="80" y="412">source: String</text>
  <text class="field" x="80" y="432">destination: String</text>
  <text class="field" x="80" y="452">departureTime: Date</text>
  <text class="field" x="80" y="472">arrivalTime: Date</text>
  <text class="field" x="80" y="492">price: Number; availableSeats/totalSeats</text>

  <!-- Train -->
  <rect class="box" x="450" y="300" width="300" height="220" />
  <text class="title" x="470" y="326">Train</text>
  <text class="field" x="470" y="352">_id: ObjectId</text>
  <text class="field" x="470" y="372">trainNumber: String (unique)</text>
  <text class="field" x="470" y="392">trainName: String</text>
  <text class="field" x="470" y="412">source/destination: String</text>
  <text class="field" x="470" y="432">departure/arrival: Date</text>
  <text class="field" x="470" y="452">class: enum</text>
  <text class="field" x="470" y="472">price: Number; availableSeats/totalSeats</text>

  <!-- Hotel -->
  <rect class="box" x="840" y="300" width="300" height="220" />
  <text class="title" x="860" y="326">Hotel</text>
  <text class="field" x="860" y="352">_id: ObjectId</text>
  <text class="field" x="860" y="372">name: String</text>
  <text class="field" x="860" y="392">location/address: String</text>
  <text class="field" x="860" y="412">price: Number</text>
  <text class="field" x="860" y="432">rating: 1..5</text>
  <text class="field" x="860" y="452">availableRooms/totalRooms</text>
  <text class="field" x="860" y="472">roomType: enum</text>

  <!-- Booking -->
  <rect class="box" x="350" y="60" width="440" height="200" />
  <text class="title" x="370" y="86">Booking</text>
  <text class="field" x="370" y="112">_id: ObjectId</text>
  <text class="field" x="370" y="132">userId: ObjectId (ref User)</text>
  <text class="field" x="370" y="152">bookingType: enum('flight','train','hotel','multi')</text>
  <text class="field" x="370" y="172">status: enum('pending','confirmed','cancelled','failed')</text>
  <text class="field" x="370" y="192">totalAmount: Number; paymentStatus: enum</text>
  <text class="field" x="370" y="212">trip: { flightDetails | trainDetails | hotelDetails }</text>
  
  <text class="note" x="370" y="232">trip.*Details contain denormalized info for PDFs and history</text>

  <!-- Relationships -->
  <!-- User 1..* Booking -->
  <line class="rel" x1="200" y1="240" x2="420" y2="160" />
  <text class="relText" x="260" y="190">1 .. *</text>

  <!-- Booking to Flight (optional) -->
  <line class="rel" x1="480" y1="260" x2="210" y2="300" />
  <text class="relText" x="300" y="285">0..1</text>

  <!-- Booking to Train (optional) -->
  <line class="rel" x1="580" y1="260" x2="600" y2="300" />
  <text class="relText" x="590" y="285">0..1</text>

  <!-- Booking to Hotel (optional) -->
  <line class="rel" x1="700" y1="260" x2="980" y2="300" />
  <text class="relText" x="820" y="285">0..1</text>

  <!-- Admin: no direct FK but manages all -->
  <line class="rel" x1="1000" y1="260" x2="570" y2="160" />
  <text class="relText" x="820" y="210">manages</text>
</svg>